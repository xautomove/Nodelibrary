# GNSS路径发布器

## 功能描述
这个节点订阅GNSS数据，记录路径点并发布路径消息。它可以用于：
- 记录车辆或机器人的运动轨迹
- 生成可视化路径
- 路径分析和回放

## 节点接口

### 输入参数
- **gnss_topic** (string): GNSS数据订阅话题，通过节点输入连接提供

### 输出参数
- **path_topic** (string): 路径发布话题，通过节点输出连接提供

## 配置参数

### 必需参数
- **path_topic**: 路径发布话题（默认：`/gnss_path`）
- **frame_id**: 路径坐标系（默认：`map`）

### 可选参数
- **max_points**: 最大路径点数量（默认：1000）
- **min_distance**: 最小距离阈值，只有移动超过此距离才记录新点（默认：1.0米）
- **distance_offset**: 距离偏移值，正数增加阈值，负数减少阈值（默认：0.0米）
- **path_color_r**: 路径颜色红色分量（默认：0.0）
- **path_color_g**: 路径颜色绿色分量（默认：1.0）
- **path_color_b**: 路径颜色蓝色分量（默认：0.0）
- **path_width**: 路径线宽（默认：0.1）

## 输入输出

### 订阅话题
- **NavSatFix**: GNSS定位数据（话题名称通过节点输入提供）

### 发布话题
- **Path**: 路径消息，包含所有记录的路径点（话题名称通过配置设置）

## 工作原理

1. **输入接收**: 通过节点输入接收GNSS话题名称
2. **数据订阅**: 节点订阅指定的GNSS话题
3. **距离过滤**: 只有当新位置与上一个记录点距离超过（最小距离阈值 + 偏移值）时才记录
4. **坐标转换**: 将经纬度坐标转换为相对XY坐标（米），便于在RViz中显示
5. **路径构建**: 将有效的GNSS点转换为PoseStamped消息
6. **路径发布**: 定期发布包含所有路径点的Path消息
7. **内存管理**: 当路径点数量超过限制时，自动删除最旧的点
8. **输出提供**: 通过节点输出提供path_topic信息

## 使用说明

节点会在客户端环境中自动启动，通过配置文件进行参数设置。GNSS话题名称通过节点输入连接提供，路径话题名称通过配置项设置。

## 可视化

在RViz中可视化路径：
1. 添加Path显示类型
2. 设置话题为配置的path_topic值
3. 设置坐标系为配置的frame_id值

## 注意事项

1. **坐标系**: 路径点使用相对XY坐标（米），第一个GNSS点作为坐标原点
2. **数据质量**: 节点会过滤无效的GNSS数据（status < 0）
3. **性能**: 大量路径点可能影响性能，建议适当设置max_points
4. **内存**: 路径点存储在内存中，重启节点会丢失历史路径
5. **坐标转换**: 使用等距圆柱投影将经纬度转换为米制坐标，适用于小范围区域
6. **输入要求**: 必须通过节点输入提供有效的GNSS话题名称

## 依赖

- ROS2
- sensor_msgs
- nav_msgs
- geometry_msgs
- numpy 